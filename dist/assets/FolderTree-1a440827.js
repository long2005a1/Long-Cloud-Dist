import{aZ as S,b as $,x as t,Q as Z,S as d,V as s,aI as v,M as y,L as M,bu as q,N as O,O as x,U as I,W as B,D as h,aq as H,d5 as A,dt as J,b9 as K,du as Q,_ as X,dv as G,K as _,F as Y,dw as p,az as f,I as k,aj as ee,a2 as te,ao as R,i as ne,ak as re,Z as oe,j as ae,dx as le,br as ce}from"./index-ff851c3c.js";import{t as de,h as ue}from"./index-dd9c6a04.js";const T=le(),z=e=>{var o;const[l,n]=h("/");return(o=e.handle)==null||o.call(e,{setPath:n}),t(H,{class:"folder-tree-box",w:"$full",overflowX:"auto",get children(){return t(T.Provider,{get value(){return{value:l,onChange:r=>{n(r),e.onChange(r)},autoOpen:e.autoOpen??!1,forceRoot:e.forceRoot??!1,showEmptyIcon:e.showEmptyIcon??!1,showHiddenFolder:e.showHiddenFolder??!0}},get children(){return t(V,{path:"/"})}})}})},V=e=>{const{isHidePath:l}=A(),[n,o]=h(),{value:r,onChange:u,forceRoot:a,autoOpen:D,showEmptyIcon:E,showHiddenFolder:P}=J(T),j=()=>{var c;return!!(E&&n()!==void 0&&!((c=n())!=null&&c.length))},[L,N]=K(()=>Q(e.path,X(),a));let C=!1;const w=async()=>{var F;if((F=n())!=null&&F.length)return;const c=await N();ce(c,W=>{C=!0,o(W)},()=>{i()&&g()})},{isOpen:i,onToggle:g}=S(),m=()=>r()===e.path,b=G(e.path);_(Y(r,async c=>{D&&b(c)&&(i()||g(),C||w())}));const U=()=>l(e.path)&&!b(r());return t(d,{get when(){return P||!U()},get children(){return t(H,{get children(){return[t(v,{spacing:"$2",get children(){return[t(d,{get when(){return!L()},get fallback(){return t(p,{size:"sm",get color(){return f()}})},get children(){return t(d,{get when(){return!j()},get fallback(){return t(k,{get color(){return f()},as:de})},get children(){return t(k,{get color(){return f()},as:ue,get transform(){return i()?"rotate(90deg)":"none"},transition:"transform 0.2s",cursor:"pointer",onClick:()=>{g(),i()&&w()}})}})}}),t(ee,{css:{whiteSpace:"nowrap"},fontSize:"$md",cursor:"pointer",px:"$1",rounded:"$md",get bgColor(){return m()?"$info8":"transparent"},get _hover(){return{bgColor:m()?"$info8":te()}},onClick:()=>{u(e.path)},get children(){return R(()=>e.path==="/",!0)()?"root":ne(e.path)}})]}}),t(d,{get when(){return i()},get children(){return t(re,{mt:"$1",pl:"$4",alignItems:"start",spacing:"$1",get children(){return t(oe,{get each(){return n()},children:c=>t(V,{get path(){return ae(e.path,c.name)}})})}})}})]}})}})},ge=e=>{const l=$(),[n,o]=h(e.defaultValue??"/"),[r,u]=h();return _(()=>{var a;e.opened&&((a=r())==null||a.setPath(n()))}),t(B,{size:"xl",blockScrollOnMount:!1,get opened(){return e.opened},get onClose(){return e.onClose},get children(){return[t(y,{}),t(M,{get children(){return[t(O,{w:"$full",css:{overflowWrap:"break-word"},get children(){return e.header}}),t(x,{get children(){return[R(()=>e.children),t(z,{onChange:o,handle:a=>u(a),autoOpen:!0})]}}),t(I,{display:"flex",gap:"$2",get children(){return[t(d,{get when(){return e.footerSlot},get children(){return e.footerSlot}}),t(s,{get onClick(){return e.onClose},colorScheme:"neutral",get children(){return l("global.cancel")}}),t(s,{get loading(){return e.loading},onClick:()=>{var a;return(a=e.onSubmit)==null?void 0:a.call(e,n())},get children(){return l("global.ok")}})]}})]}})]}})},fe=e=>{const{isOpen:l,onOpen:n,onClose:o}=S(),r=$();return[t(v,{w:"$full",spacing:"$2",get children(){return[t(Z,{get id(){return e.id},get value(){return e.value},onInput:u=>e.onChange(u.currentTarget.value),get readOnly(){return e.onlyFolder},get onClick(){return e.onlyFolder?n:()=>{}},get placeholder(){return r(`global.${e.onlyFolder?"choose_folder":"choose_or_input_path"}`)}}),t(d,{get when(){return!e.onlyFolder},get children(){return t(s,{onClick:n,get children(){return r("global.choose")}})}})]}}),t(B,{size:"xl",get opened(){return l()},onClose:o,get children(){return[t(y,{}),t(M,{get children(){return[t(q,{}),t(O,{get children(){return r("global.choose_folder")}}),t(x,{get children(){return t(z,{forceRoot:!0,get onChange(){return e.onChange}})}}),t(I,{get children(){return t(s,{onClick:o,get children(){return r("global.confirm")}})}})]}})]}})]};export{z as F,ge as M,fe as a};
